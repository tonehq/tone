# STT Metadata Schema
# Supported parameters for each STT service provider used in get_stt_for_agent()
# Generated by inspecting each class's __init__ and its full inheritance chain.

# ─────────────────────────────────────────────────────────────────────────────
# Common inherited parameters (available to ALL providers):
#   From STTService:
#     - audio_passthrough: bool (default: true)
#     - sample_rate: Optional[int] (default: null)
#     - stt_ttfb_timeout: float (default: 2.0)
#   From FrameProcessor:
#     - name: Optional[str] (default: null)
#     - enable_direct_mode: bool (default: false)
#     - metrics: Optional[FrameProcessorMetrics] (default: null)
#
# WebsocketSTTService-based providers additionally inherit:
#     - reconnect_on_error: bool (default: true)
# ─────────────────────────────────────────────────────────────────────────────

deepgram:
  class: DeepgramSTTService
  file: pipecat/services/deepgram/stt.py
  inherits: STTService -> AIService -> FrameProcessor
  init_params:
    - name: api_key
      type: str
      required: true
    - name: url
      type: str
      default: ""
      note: "Deprecated, use base_url"
    - name: base_url
      type: str
      default: ""
    - name: sample_rate
      type: Optional[int]
      default: null
    - name: live_options
      type: Optional[LiveOptions]
      default: null
      note: "Deepgram SDK LiveOptions object"
    - name: addons
      type: Optional[Dict]
      default: null
    - name: should_interrupt
      type: bool
      default: true
      note: "Deprecated"

openai:
  class: OpenAISTTService
  file: pipecat/services/openai/stt.py
  inherits: BaseWhisperSTTService -> SegmentedSTTService -> STTService -> AIService -> FrameProcessor
  init_params:
    - name: model
      type: str
      default: "gpt-4o-transcribe"
    - name: api_key
      type: Optional[str]
      default: null
    - name: base_url
      type: Optional[str]
      default: null
    - name: language
      type: Optional[Language]
      default: "Language.EN"
    - name: prompt
      type: Optional[str]
      default: null
    - name: temperature
      type: Optional[float]
      default: null
    - name: include_prob_metrics
      type: bool
      default: false
      note: "From BaseWhisperSTTService"

groq:
  class: GroqSTTService
  file: pipecat/services/groq/stt.py
  inherits: BaseWhisperSTTService -> SegmentedSTTService -> STTService -> AIService -> FrameProcessor
  init_params:
    - name: model
      type: str
      default: "whisper-large-v3-turbo"
    - name: api_key
      type: Optional[str]
      default: null
    - name: base_url
      type: str
      default: "https://api.groq.com/openai/v1"
    - name: language
      type: Optional[Language]
      default: "Language.EN"
    - name: prompt
      type: Optional[str]
      default: null
    - name: temperature
      type: Optional[float]
      default: null
    - name: include_prob_metrics
      type: bool
      default: false
      note: "From BaseWhisperSTTService"

segmented:
  class: SegmentedSTTService
  file: pipecat/services/stt_service.py
  inherits: STTService -> AIService -> FrameProcessor
  init_params:
    - name: sample_rate
      type: Optional[int]
      default: null

azure:
  class: AzureSTTService
  file: pipecat/services/azure/stt.py
  inherits: STTService -> AIService -> FrameProcessor
  init_params:
    - name: api_key
      type: str
      required: true
    - name: region
      type: str
      required: true
    - name: language
      type: Language
      default: "Language.EN_US"
    - name: sample_rate
      type: Optional[int]
      default: null
    - name: endpoint_id
      type: Optional[str]
      default: null

google:
  class: GoogleSTTService
  file: pipecat/services/google/stt.py
  inherits: STTService -> AIService -> FrameProcessor
  init_params:
    - name: credentials
      type: Optional[str]
      default: null
    - name: credentials_path
      type: Optional[str]
      default: null
    - name: location
      type: str
      default: "global"
    - name: sample_rate
      type: Optional[int]
      default: null
    - name: params
      type: Optional[InputParams]
      default: null
  input_params:
    - name: languages
      type: Union[Language, List[Language]]
      default: "[Language.EN_US]"
    - name: model
      type: Optional[str]
      default: "latest_long"
    - name: use_separate_recognition_per_channel
      type: Optional[bool]
      default: false
    - name: enable_automatic_punctuation
      type: Optional[bool]
      default: true
    - name: enable_spoken_punctuation
      type: Optional[bool]
      default: false
    - name: enable_spoken_emojis
      type: Optional[bool]
      default: false
    - name: profanity_filter
      type: Optional[bool]
      default: false
    - name: enable_word_time_offsets
      type: Optional[bool]
      default: false
    - name: enable_word_confidence
      type: Optional[bool]
      default: false
    - name: enable_interim_results
      type: Optional[bool]
      default: true
    - name: enable_voice_activity_events
      type: Optional[bool]
      default: false

nvidia:
  class: NvidiaSTTService
  file: pipecat/services/nvidia/stt.py
  inherits: STTService -> AIService -> FrameProcessor
  init_params:
    - name: api_key
      type: str
      required: true
    - name: server
      type: str
      default: "grpc.nvcf.nvidia.com:443"
    - name: model_function_map
      type: Mapping[str, str]
      default:
        function_id: "1598d209-5e27-4d3c-8079-4751568b1081"
        model_name: "parakeet-ctc-1.1b-asr"
    - name: sample_rate
      type: Optional[int]
      default: null
    - name: params
      type: Optional[InputParams]
      default: null
    - name: use_ssl
      type: bool
      default: true
  input_params:
    - name: language
      type: Optional[Language]
      default: "Language.EN_US"

sarvam:
  class: SarvamSTTService
  file: pipecat/services/sarvam/stt.py
  inherits: STTService -> AIService -> FrameProcessor
  init_params:
    - name: api_key
      type: str
      required: true
    - name: model
      type: str
      default: "saarika:v2.5"
    - name: sample_rate
      type: Optional[int]
      default: null
    - name: input_audio_codec
      type: str
      default: "wav"
    - name: params
      type: Optional[InputParams]
      default: null
  input_params:
    - name: language
      type: Optional[Language]
      default: null
    - name: prompt
      type: Optional[str]
      default: null
    - name: vad_signals
      type: bool
      default: null
    - name: high_vad_sensitivity
      type: bool
      default: null

speechmatics:
  class: SpeechmaticsSTTService
  file: pipecat/services/speechmatics/stt.py
  inherits: STTService -> AIService -> FrameProcessor
  init_params:
    - name: api_key
      type: Optional[str]
      default: null
    - name: base_url
      type: Optional[str]
      default: null
    - name: sample_rate
      type: Optional[int]
      default: null
    - name: params
      type: Optional[InputParams]
      default: null
    - name: should_interrupt
      type: bool
      default: true
  input_params:
    - name: domain
      type: Optional[str]
      default: null
    - name: language
      type: Language | str
      default: "Language.EN"
    - name: turn_detection_mode
      type: TurnDetectionMode
      default: "TurnDetectionMode.EXTERNAL"
    - name: speaker_active_format
      type: Optional[str]
      default: null
    - name: speaker_passive_format
      type: Optional[str]
      default: null
    - name: focus_speakers
      type: list[str]
      default: []
    - name: ignore_speakers
      type: list[str]
      default: []
    - name: focus_mode
      type: SpeakerFocusMode
      default: "SpeakerFocusMode.RETAIN"
    - name: known_speakers
      type: list[SpeakerIdentifier]
      default: []
    - name: additional_vocab
      type: list[AdditionalVocabEntry]
      default: []
    - name: audio_encoding
      type: AudioEncoding
      default: "AudioEncoding.PCM_S16LE"
    - name: operating_point
      type: Optional[OperatingPoint]
      default: null
    - name: max_delay
      type: Optional[float]
      default: null
    - name: end_of_utterance_silence_trigger
      type: Optional[float]
      default: null
    - name: end_of_utterance_max_delay
      type: Optional[float]
      default: null
    - name: punctuation_overrides
      type: Optional[dict]
      default: null
    - name: include_partials
      type: Optional[bool]
      default: null
    - name: split_sentences
      type: Optional[bool]
      default: null
    - name: enable_diarization
      type: Optional[bool]
      default: null
    - name: speaker_sensitivity
      type: Optional[float]
      default: null
    - name: max_speakers
      type: Optional[int]
      default: null
    - name: prefer_current_speaker
      type: Optional[bool]
      default: null
    - name: extra_params
      type: Optional[dict]
      default: null

assemblyai:
  class: AssemblyAISTTService
  file: pipecat/services/assemblyai/stt.py
  inherits: WebsocketSTTService -> STTService + WebsocketService -> AIService -> FrameProcessor
  init_params:
    - name: api_key
      type: str
      required: true
    - name: language
      type: Language
      default: "Language.EN"
    - name: api_endpoint_base_url
      type: str
      default: "wss://streaming.assemblyai.com/v3/ws"
    - name: connection_params
      type: AssemblyAIConnectionParams
      default: "AssemblyAIConnectionParams()"
    - name: vad_force_turn_endpoint
      type: bool
      default: true
  connection_params:
    - name: sample_rate
      type: int
      default: 16000
    - name: encoding
      type: Literal["pcm_s16le", "pcm_mulaw"]
      default: "pcm_s16le"
    - name: formatted_finals
      type: bool
      default: true
    - name: word_finalization_max_wait_time
      type: Optional[int]
      default: null
    - name: end_of_turn_confidence_threshold
      type: Optional[float]
      default: null
    - name: min_end_of_turn_silence_when_confident
      type: Optional[int]
      default: null
    - name: max_turn_silence
      type: Optional[int]
      default: null
    - name: keyterms_prompt
      type: Optional[List[str]]
      default: null
    - name: speech_model
      type: str
      default: "universal-streaming-english"

cartesia:
  class: CartesiaSTTService
  file: pipecat/services/cartesia/stt.py
  inherits: WebsocketSTTService -> STTService + WebsocketService -> AIService -> FrameProcessor
  init_params:
    - name: api_key
      type: str
      required: true
    - name: base_url
      type: str
      default: ""
    - name: sample_rate
      type: int
      default: 16000
    - name: live_options
      type: Optional[CartesiaLiveOptions]
      default: null
  live_options:
    - name: model
      type: str
      default: "ink-whisper"
    - name: language
      type: str
      default: "Language.EN"
    - name: encoding
      type: str
      default: "pcm_s16le"
    - name: sample_rate
      type: int
      default: 16000

elevenlabs:
  class: ElevenLabsSTTService
  file: pipecat/services/elevenlabs/stt.py
  inherits: SegmentedSTTService -> STTService -> AIService -> FrameProcessor
  init_params:
    - name: api_key
      type: str
      required: true
    - name: aiohttp_session
      type: aiohttp.ClientSession
      required: true
    - name: base_url
      type: str
      default: "https://api.elevenlabs.io"
    - name: model
      type: str
      default: "scribe_v1"
    - name: sample_rate
      type: Optional[int]
      default: null
    - name: params
      type: Optional[InputParams]
      default: null
  input_params:
    - name: language
      type: Optional[Language]
      default: null
    - name: tag_audio_events
      type: bool
      default: true

gladia:
  class: GladiaSTTService
  file: pipecat/services/gladia/stt.py
  inherits: WebsocketSTTService -> STTService + WebsocketService -> AIService -> FrameProcessor
  init_params:
    - name: api_key
      type: str
      required: true
    - name: region
      type: Literal["us-west", "eu-west"] | None
      default: null
    - name: url
      type: str
      default: "https://api.gladia.io/v2/live"
    - name: confidence
      type: Optional[float]
      default: null
      note: "Deprecated"
    - name: sample_rate
      type: Optional[int]
      default: null
    - name: model
      type: str
      default: "solaria-1"
    - name: params
      type: Optional[GladiaInputParams]
      default: null
    - name: max_buffer_size
      type: int
      default: 20971520
      note: "20MB"
    - name: should_interrupt
      type: bool
      default: true
  input_params:
    - name: encoding
      type: Optional[str]
      default: "wav/pcm"
    - name: bit_depth
      type: Optional[int]
      default: 16
    - name: channels
      type: Optional[int]
      default: 1
    - name: custom_metadata
      type: Optional[Dict[str, Any]]
      default: null
    - name: endpointing
      type: Optional[float]
      default: null
    - name: maximum_duration_without_endpointing
      type: Optional[int]
      default: 5
    - name: language
      type: Optional[Language]
      default: null
      note: "Deprecated, use language_config"
    - name: language_config
      type: Optional[LanguageConfig]
      default: null
    - name: pre_processing
      type: Optional[PreProcessingConfig]
      default: null
    - name: realtime_processing
      type: Optional[RealtimeProcessingConfig]
      default: null
    - name: messages_config
      type: Optional[MessagesConfig]
      default: null
    - name: enable_vad
      type: bool
      default: false

soniox:
  class: SonioxSTTService
  file: pipecat/services/soniox/stt.py
  inherits: WebsocketSTTService -> STTService + WebsocketService -> AIService -> FrameProcessor
  init_params:
    - name: api_key
      type: str
      required: true
    - name: url
      type: str
      default: "wss://stt-rt.soniox.com/transcribe-websocket"
    - name: sample_rate
      type: Optional[int]
      default: null
    - name: params
      type: Optional[SonioxInputParams]
      default: null
    - name: vad_force_turn_endpoint
      type: bool
      default: false
  input_params:
    - name: model
      type: str
      default: "stt-rt-preview"
    - name: audio_format
      type: Optional[str]
      default: "pcm_s16le"
    - name: num_channels
      type: Optional[int]
      default: 1
    - name: language_hints
      type: Optional[List[Language]]
      default: null
    - name: language_hints_strict
      type: Optional[bool]
      default: null
    - name: context
      type: Optional[SonioxContextObject | str]
      default: null
    - name: enable_speaker_diarization
      type: Optional[bool]
      default: false
    - name: enable_language_identification
      type: Optional[bool]
      default: false
    - name: client_reference_id
      type: Optional[str]
      default: null
